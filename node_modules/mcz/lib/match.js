"use strict";
exports.match = function match(value, matcher) {
    if (arguments.length === 1) {
        return build(value);
    }
    else {
        return build(matcher)(value);
    }
};
function build(m) {
    return resolve(matchers(m));
}
function matchers(m) {
    var matchers = [];
    var when = function (that, block) {
        matchers.push([typeof that === 'function' ? that : function (x) { return x === that; }, block]);
    };
    when.else = function (block) {
        matchers.push([function () { return true; }, block]);
    };
    m(when);
    return matchers;
}
function resolve(matchers) {
    var n = matchers.length;
    return function (value) {
        for (var i = 0; i < n; ++i) {
            var _a = matchers[i], guard = _a[0], block = _a[1];
            if (guard(value) === true) {
                return block(value);
            }
        }
        throw new Error('MatchError: Given value does not match any cases');
    };
}
//# sourceMappingURL=match.js.map